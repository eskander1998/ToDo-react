{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Skander/Desktop/Capgemini/react/todo-app/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"C:/Users/Skander/Desktop/Capgemini/react/todo-app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Skander/Desktop/Capgemini/react/todo-app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import\"../components/style.css\";import axios from\"axios\";import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function TaskList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),todos=_useState2[0],setTodos=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),taskTitle=_useState4[0],setTaskTitle=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),taskDescription=_useState6[0],setTaskDescription=_useState6[1];var navigate=useNavigate();useEffect(function(){axios.get(\"https://backend-rho-cyan.vercel.app/todos\").then(function(response){console.log(\"\\uD83D\\uDC40 \",response.data);var sortedTodos=response.data.sort(function(a,b){if(a.status===b.status){// Si les tÃ¢ches ont le mÃªme statut\nif(a.status===\"incompleted\"){// Trier les tÃ¢ches \"incompleted\" par date de crÃ©ation dÃ©croissante\nreturn new Date(b.createdAt)-new Date(a.createdAt);}else{// Trier les tÃ¢ches \"completed\" par date de mise Ã  jour croissante\nreturn new Date(a.updatedAt)-new Date(b.updatedAt);}}else{// Trier les tÃ¢ches \"incompleted\" avant les tÃ¢ches \"completed\"\nreturn a.status===\"incompleted\"?-1:1;}});setTodos(sortedTodos);});},[]);var updateTaskOrder=function updateTaskOrder(task){var updatedTask=_objectSpread({},task);axios.put(\"https://backend-rho-cyan.vercel.app/todos/\".concat(task._id),updatedTask).then(function(response){var updatedTaskFromResponse=response.data;var updatedTodos=_toConsumableArray(todos);var index=updatedTodos.findIndex(function(t){return t._id===task._id;});if(index!==-1){updatedTodos.splice(index,1);if(updatedTaskFromResponse.status===\"completed\"){updatedTodos.push(updatedTaskFromResponse);}else{var i=updatedTodos.findIndex(function(t){return t._id>updatedTaskFromResponse._id;});if(i===-1)i=updatedTodos.length;updatedTodos.splice(i,0,updatedTaskFromResponse);updatedTodos.sort(function(a,b){if(a.status===b.status){// Si les tÃ¢ches ont le mÃªme statut\nif(a.status===\"incompleted\"){// Trier les tÃ¢ches \"incompleted\" par date de crÃ©ation dÃ©croissante\nreturn new Date(b.createdAt)-new Date(a.createdAt);}else{// Trier les tÃ¢ches \"completed\" par date de mise Ã  jour croissante\nreturn new Date(a.updatedAt)-new Date(b.updatedAt);}}else{// Trier les tÃ¢ches \"incompleted\" avant les tÃ¢ches \"completed\"\nreturn a.status===\"incompleted\"?-1:1;}});}setTodos(updatedTodos);}});};var addTask=function addTask(e){e.preventDefault();// empÃªcher le comportement par dÃ©faut du formulaire\nvar newTask={title:taskTitle,completed:false,description:taskDescription};axios.post(\"https://backend-rho-cyan.vercel.app/todos\",newTask).then(function(response){var taskToAdd=_objectSpread({},response.data);setTodos([taskToAdd].concat(_toConsumableArray(todos)));setTaskTitle(\"\");setTaskDescription(\"\");});};var viewTodoDetails=function viewTodoDetails(task){navigate(\"/tododetail/\".concat(task._id));};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Sogeti-logo-2018.svg/1200px-Sogeti-logo-2018.svg.png\",alt:\"Capgemini image\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addTask,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:taskTitle,onChange:function onChange(e){return setTaskTitle(e.target.value);},placeholder:\"Task title\",required:true}),/*#__PURE__*/_jsx(\"textarea\",{value:taskDescription,onChange:function onChange(e){return setTaskDescription(e.target.value);},placeholder:\"Task Description\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Add task\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"todo-list\",children:/*#__PURE__*/_jsx(\"ul\",{children:todos.map(function(task){return/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:task.status==='completed'?true:false,onChange:function onChange(){return updateTaskOrder(task);}}),/*#__PURE__*/_jsx(\"a\",{className:task.status==='completed'?'completed':'',onClick:function onClick(){return viewTodoDetails(task);},children:task.title})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"task-status \".concat(task.status==='completed'?'completed':'not-completed'),children:[task.taskStatus,task.status==='completed'?'completed':'not-completed']})]},task._id);})})})]});}","map":{"version":3,"names":["useEffect","useState","axios","useNavigate","jsx","_jsx","jsxs","_jsxs","TaskList","_useState","_useState2","_slicedToArray","todos","setTodos","_useState3","_useState4","taskTitle","setTaskTitle","_useState5","_useState6","taskDescription","setTaskDescription","navigate","get","then","response","console","log","data","sortedTodos","sort","a","b","status","Date","createdAt","updatedAt","updateTaskOrder","task","updatedTask","_objectSpread","put","concat","_id","updatedTaskFromResponse","updatedTodos","_toConsumableArray","index","findIndex","t","splice","push","i","length","addTask","e","preventDefault","newTask","title","completed","description","post","taskToAdd","viewTodoDetails","className","children","src","alt","onSubmit","type","value","onChange","target","placeholder","required","map","checked","onClick","taskStatus"],"sources":["C:/Users/Skander/Desktop/Capgemini/react/todo-app/client/src/components/TodoList.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\r\nimport \"../components/style.css\";\r\nimport axios from \"axios\";\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\n\r\nexport default function TaskList() {\r\n  const [todos, setTodos] = useState([]);\r\n  const [taskTitle, setTaskTitle] = useState(\"\");\r\n  const [taskDescription, setTaskDescription] = useState(\"\");\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    axios.get(\"https://backend-rho-cyan.vercel.app/todos\").then((response) => {\r\n      console.log(`ðŸ‘€ `, response.data)\r\n      const sortedTodos = response.data.sort((a, b) => {\r\n        if (a.status === b.status) {\r\n          // Si les tÃ¢ches ont le mÃªme statut\r\n          if (a.status === \"incompleted\") {\r\n            // Trier les tÃ¢ches \"incompleted\" par date de crÃ©ation dÃ©croissante\r\n            return new Date(b.createdAt) - new Date(a.createdAt);\r\n          } else {\r\n            // Trier les tÃ¢ches \"completed\" par date de mise Ã  jour croissante\r\n            return new Date(a.updatedAt) - new Date(b.updatedAt);\r\n          }\r\n        } else {\r\n          // Trier les tÃ¢ches \"incompleted\" avant les tÃ¢ches \"completed\"\r\n          return a.status === \"incompleted\" ? -1 : 1;\r\n        }\r\n      });\r\n      setTodos(sortedTodos);\r\n\r\n    });\r\n  }, []);\r\n\r\n\r\n  const updateTaskOrder = (task) => {\r\n    const updatedTask = {\r\n      ...task\r\n    };\r\n\r\n    axios.put(`https://backend-rho-cyan.vercel.app/todos/${task._id}`, updatedTask).then((response) => {\r\n      const updatedTaskFromResponse = response.data;\r\n      const updatedTodos = [...todos];\r\n      const index = updatedTodos.findIndex((t) => t._id === task._id);\r\n\r\n      if (index !== -1) {\r\n        updatedTodos.splice(index, 1);\r\n        if (updatedTaskFromResponse.status===\"completed\") {\r\n          updatedTodos.push(updatedTaskFromResponse);\r\n        } else {\r\n          let i = updatedTodos.findIndex((t) => t._id > updatedTaskFromResponse._id);\r\n          if (i === -1) i = updatedTodos.length;\r\n          updatedTodos.splice(i, 0, updatedTaskFromResponse);\r\n          updatedTodos.sort((a, b) => {\r\n            if (a.status === b.status) {\r\n              // Si les tÃ¢ches ont le mÃªme statut\r\n              if (a.status === \"incompleted\") {\r\n                // Trier les tÃ¢ches \"incompleted\" par date de crÃ©ation dÃ©croissante\r\n                return new Date(b.createdAt) - new Date(a.createdAt);\r\n              } else {\r\n                // Trier les tÃ¢ches \"completed\" par date de mise Ã  jour croissante\r\n                return new Date(a.updatedAt) - new Date(b.updatedAt);\r\n              }\r\n            } else {\r\n              // Trier les tÃ¢ches \"incompleted\" avant les tÃ¢ches \"completed\"\r\n              return a.status === \"incompleted\" ? -1 : 1;\r\n            }\r\n          });\r\n        }\r\n         \r\n        setTodos(updatedTodos);\r\n        \r\n      }\r\n    });\r\n  };\r\n\r\n  const addTask = (e) => {\r\n    e.preventDefault(); // empÃªcher le comportement par dÃ©faut du formulaire\r\n\r\n    const newTask = {\r\n      title: taskTitle,\r\n      completed: false,\r\n      description: taskDescription,\r\n    };\r\n    axios.post(\"https://backend-rho-cyan.vercel.app/todos\", newTask).then((response) => {\r\n      const taskToAdd = { ...response.data };\r\n      setTodos([taskToAdd, ...todos]);\r\n      setTaskTitle(\"\");\r\n      setTaskDescription(\"\");\r\n    });\r\n  };\r\n\r\n  const viewTodoDetails = ( task) => {\r\n    navigate(`/tododetail/${task._id}` );\r\n\r\n  };\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"header\">\r\n        <img\r\n          src=\"https://upload.wikimedia.org/wikipedia/commons/thumb/7/75/Sogeti-logo-2018.svg/1200px-Sogeti-logo-2018.svg.png\"\r\n          alt=\"Capgemini image\"\r\n        />\r\n      </div>\r\n\r\n\r\n      <form onSubmit={addTask}>\r\n        <input\r\n          type=\"text\"\r\n          value={taskTitle}\r\n          onChange={(e) => setTaskTitle(e.target.value)}\r\n          placeholder=\"Task title\"\r\n          required\r\n        />\r\n        <textarea\r\n          value={taskDescription}\r\n          onChange={(e) => setTaskDescription(e.target.value)}\r\n          placeholder=\"Task Description\"\r\n        />\r\n        <button type=\"submit\">Add task</button>\r\n      </form>\r\n      <div className=\"todo-list\">\r\n        <ul>\r\n          {todos.map((task) => (\r\n            <li key={task._id}>\r\n              <div>\r\n                <input\r\n                  type=\"checkbox\"\r\n                  checked={task.status === 'completed' ? true : false}\r\n                  onChange={() => updateTaskOrder(task)}\r\n\r\n                />\r\n                <a className={task.status === 'completed' ? 'completed' : ''}\r\n                  onClick={() => viewTodoDetails(task)}\r\n                >\r\n                  {task.title}\r\n                </a>\r\n              </div>\r\n              <span className={`task-status ${task.status === 'completed' ? 'completed' : 'not-completed'}`}>\r\n                {task.taskStatus}\r\n\r\n                {task.status === 'completed' ? 'completed' : 'not-completed'}\r\n              </span>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"ibAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,yBAAyB,CAChC,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAG/C,cAAe,SAAS,CAAAC,QAAQA,CAAA,CAAG,CACjC,IAAAC,SAAA,CAA0BR,QAAQ,CAAC,EAAE,CAAC,CAAAS,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAA/BG,KAAK,CAAAF,UAAA,IAAEG,QAAQ,CAAAH,UAAA,IACtB,IAAAI,UAAA,CAAkCb,QAAQ,CAAC,EAAE,CAAC,CAAAc,UAAA,CAAAJ,cAAA,CAAAG,UAAA,IAAvCE,SAAS,CAAAD,UAAA,IAAEE,YAAY,CAAAF,UAAA,IAC9B,IAAAG,UAAA,CAA8CjB,QAAQ,CAAC,EAAE,CAAC,CAAAkB,UAAA,CAAAR,cAAA,CAAAO,UAAA,IAAnDE,eAAe,CAAAD,UAAA,IAAEE,kBAAkB,CAAAF,UAAA,IAC1C,GAAM,CAAAG,QAAQ,CAAGnB,WAAW,CAAC,CAAC,CAE9BH,SAAS,CAAC,UAAM,CACdE,KAAK,CAACqB,GAAG,CAAC,2CAA2C,CAAC,CAACC,IAAI,CAAC,SAACC,QAAQ,CAAK,CACxEC,OAAO,CAACC,GAAG,iBAAQF,QAAQ,CAACG,IAAI,CAAC,CACjC,GAAM,CAAAC,WAAW,CAAGJ,QAAQ,CAACG,IAAI,CAACE,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,CAAK,CAC/C,GAAID,CAAC,CAACE,MAAM,GAAKD,CAAC,CAACC,MAAM,CAAE,CACzB;AACA,GAAIF,CAAC,CAACE,MAAM,GAAK,aAAa,CAAE,CAC9B;AACA,MAAO,IAAI,CAAAC,IAAI,CAACF,CAAC,CAACG,SAAS,CAAC,CAAG,GAAI,CAAAD,IAAI,CAACH,CAAC,CAACI,SAAS,CAAC,CACtD,CAAC,IAAM,CACL;AACA,MAAO,IAAI,CAAAD,IAAI,CAACH,CAAC,CAACK,SAAS,CAAC,CAAG,GAAI,CAAAF,IAAI,CAACF,CAAC,CAACI,SAAS,CAAC,CACtD,CACF,CAAC,IAAM,CACL;AACA,MAAO,CAAAL,CAAC,CAACE,MAAM,GAAK,aAAa,CAAG,CAAC,CAAC,CAAG,CAAC,CAC5C,CACF,CAAC,CAAC,CACFpB,QAAQ,CAACgB,WAAW,CAAC,CAEvB,CAAC,CAAC,CACJ,CAAC,CAAE,EAAE,CAAC,CAGN,GAAM,CAAAQ,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAIC,IAAI,CAAK,CAChC,GAAM,CAAAC,WAAW,CAAAC,aAAA,IACZF,IAAI,CACR,CAEDpC,KAAK,CAACuC,GAAG,8CAAAC,MAAA,CAA8CJ,IAAI,CAACK,GAAG,EAAIJ,WAAW,CAAC,CAACf,IAAI,CAAC,SAACC,QAAQ,CAAK,CACjG,GAAM,CAAAmB,uBAAuB,CAAGnB,QAAQ,CAACG,IAAI,CAC7C,GAAM,CAAAiB,YAAY,CAAAC,kBAAA,CAAOlC,KAAK,CAAC,CAC/B,GAAM,CAAAmC,KAAK,CAAGF,YAAY,CAACG,SAAS,CAAC,SAACC,CAAC,QAAK,CAAAA,CAAC,CAACN,GAAG,GAAKL,IAAI,CAACK,GAAG,GAAC,CAE/D,GAAII,KAAK,GAAK,CAAC,CAAC,CAAE,CAChBF,YAAY,CAACK,MAAM,CAACH,KAAK,CAAE,CAAC,CAAC,CAC7B,GAAIH,uBAAuB,CAACX,MAAM,GAAG,WAAW,CAAE,CAChDY,YAAY,CAACM,IAAI,CAACP,uBAAuB,CAAC,CAC5C,CAAC,IAAM,CACL,GAAI,CAAAQ,CAAC,CAAGP,YAAY,CAACG,SAAS,CAAC,SAACC,CAAC,QAAK,CAAAA,CAAC,CAACN,GAAG,CAAGC,uBAAuB,CAACD,GAAG,GAAC,CAC1E,GAAIS,CAAC,GAAK,CAAC,CAAC,CAAEA,CAAC,CAAGP,YAAY,CAACQ,MAAM,CACrCR,YAAY,CAACK,MAAM,CAACE,CAAC,CAAE,CAAC,CAAER,uBAAuB,CAAC,CAClDC,YAAY,CAACf,IAAI,CAAC,SAACC,CAAC,CAAEC,CAAC,CAAK,CAC1B,GAAID,CAAC,CAACE,MAAM,GAAKD,CAAC,CAACC,MAAM,CAAE,CACzB;AACA,GAAIF,CAAC,CAACE,MAAM,GAAK,aAAa,CAAE,CAC9B;AACA,MAAO,IAAI,CAAAC,IAAI,CAACF,CAAC,CAACG,SAAS,CAAC,CAAG,GAAI,CAAAD,IAAI,CAACH,CAAC,CAACI,SAAS,CAAC,CACtD,CAAC,IAAM,CACL;AACA,MAAO,IAAI,CAAAD,IAAI,CAACH,CAAC,CAACK,SAAS,CAAC,CAAG,GAAI,CAAAF,IAAI,CAACF,CAAC,CAACI,SAAS,CAAC,CACtD,CACF,CAAC,IAAM,CACL;AACA,MAAO,CAAAL,CAAC,CAACE,MAAM,GAAK,aAAa,CAAG,CAAC,CAAC,CAAG,CAAC,CAC5C,CACF,CAAC,CAAC,CACJ,CAEApB,QAAQ,CAACgC,YAAY,CAAC,CAExB,CACF,CAAC,CAAC,CACJ,CAAC,CAED,GAAM,CAAAS,OAAO,CAAG,QAAV,CAAAA,OAAOA,CAAIC,CAAC,CAAK,CACrBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAAE;AAEpB,GAAM,CAAAC,OAAO,CAAG,CACdC,KAAK,CAAE1C,SAAS,CAChB2C,SAAS,CAAE,KAAK,CAChBC,WAAW,CAAExC,eACf,CAAC,CACDlB,KAAK,CAAC2D,IAAI,CAAC,2CAA2C,CAAEJ,OAAO,CAAC,CAACjC,IAAI,CAAC,SAACC,QAAQ,CAAK,CAClF,GAAM,CAAAqC,SAAS,CAAAtB,aAAA,IAAQf,QAAQ,CAACG,IAAI,CAAE,CACtCf,QAAQ,EAAEiD,SAAS,EAAApB,MAAA,CAAAI,kBAAA,CAAKlC,KAAK,EAAC,CAAC,CAC/BK,YAAY,CAAC,EAAE,CAAC,CAChBI,kBAAkB,CAAC,EAAE,CAAC,CACxB,CAAC,CAAC,CACJ,CAAC,CAED,GAAM,CAAA0C,eAAe,CAAG,QAAlB,CAAAA,eAAeA,CAAKzB,IAAI,CAAK,CACjChB,QAAQ,gBAAAoB,MAAA,CAAgBJ,IAAI,CAACK,GAAG,CAAG,CAAC,CAEtC,CAAC,CACD,mBACEpC,KAAA,QAAKyD,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxB5D,IAAA,QAAK2D,SAAS,CAAC,QAAQ,CAAAC,QAAA,cACrB5D,IAAA,QACE6D,GAAG,CAAC,gHAAgH,CACpHC,GAAG,CAAC,iBAAiB,CACtB,CAAC,CACC,CAAC,cAGN5D,KAAA,SAAM6D,QAAQ,CAAEd,OAAQ,CAAAW,QAAA,eACtB5D,IAAA,UACEgE,IAAI,CAAC,MAAM,CACXC,KAAK,CAAEtD,SAAU,CACjBuD,QAAQ,CAAE,SAAAA,SAAChB,CAAC,QAAK,CAAAtC,YAAY,CAACsC,CAAC,CAACiB,MAAM,CAACF,KAAK,CAAC,EAAC,CAC9CG,WAAW,CAAC,YAAY,CACxBC,QAAQ,MACT,CAAC,cACFrE,IAAA,aACEiE,KAAK,CAAElD,eAAgB,CACvBmD,QAAQ,CAAE,SAAAA,SAAChB,CAAC,QAAK,CAAAlC,kBAAkB,CAACkC,CAAC,CAACiB,MAAM,CAACF,KAAK,CAAC,EAAC,CACpDG,WAAW,CAAC,kBAAkB,CAC/B,CAAC,cACFpE,IAAA,WAAQgE,IAAI,CAAC,QAAQ,CAAAJ,QAAA,CAAC,UAAQ,CAAQ,CAAC,EACnC,CAAC,cACP5D,IAAA,QAAK2D,SAAS,CAAC,WAAW,CAAAC,QAAA,cACxB5D,IAAA,OAAA4D,QAAA,CACGrD,KAAK,CAAC+D,GAAG,CAAC,SAACrC,IAAI,qBACd/B,KAAA,OAAA0D,QAAA,eACE1D,KAAA,QAAA0D,QAAA,eACE5D,IAAA,UACEgE,IAAI,CAAC,UAAU,CACfO,OAAO,CAAEtC,IAAI,CAACL,MAAM,GAAK,WAAW,CAAG,IAAI,CAAG,KAAM,CACpDsC,QAAQ,CAAE,SAAAA,SAAA,QAAM,CAAAlC,eAAe,CAACC,IAAI,CAAC,EAAC,CAEvC,CAAC,cACFjC,IAAA,MAAG2D,SAAS,CAAE1B,IAAI,CAACL,MAAM,GAAK,WAAW,CAAG,WAAW,CAAG,EAAG,CAC3D4C,OAAO,CAAE,SAAAA,QAAA,QAAM,CAAAd,eAAe,CAACzB,IAAI,CAAC,EAAC,CAAA2B,QAAA,CAEpC3B,IAAI,CAACoB,KAAK,CACV,CAAC,EACD,CAAC,cACNnD,KAAA,SAAMyD,SAAS,gBAAAtB,MAAA,CAAiBJ,IAAI,CAACL,MAAM,GAAK,WAAW,CAAG,WAAW,CAAG,eAAe,CAAG,CAAAgC,QAAA,EAC3F3B,IAAI,CAACwC,UAAU,CAEfxC,IAAI,CAACL,MAAM,GAAK,WAAW,CAAG,WAAW,CAAG,eAAe,EACxD,CAAC,GAlBAK,IAAI,CAACK,GAmBV,CAAC,EACN,CAAC,CACA,CAAC,CACF,CAAC,EACH,CAAC,CAEV"},"metadata":{},"sourceType":"module","externalDependencies":[]}